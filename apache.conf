<VirtualHost *:80>
    ServerAdmin webmaster@localhost

	#
	# See https://github.com/openstreetmap/mod_tile/blob/master/src/mod_tile.c#L2887
	# for possible configuration options
	#
	# More info
	# https://github.com/osm-fr/layers-mapnik-styles/blob/master/config/apache-vhost.conf
	#
	# TODO: Write man-page for options in /etc/renderd.conf and apache.config
	#
	#
	#
    AddTileConfig /tile/ default
    LoadTileConfigFile /etc/renderd.conf
    ModTileRenderdSocketName /run/renderd/renderd.sock

    # Timeout before giving up for a tile to be rendered
    ModTileRequestTimeout 0
    # Timeout before giving up for a tile to be rendered that is otherwise missing
    ModTileMissingRequestTimeout 120
    # If tile is missing, don't render it if past this load threshold (user gets 404 error)
    ModTileMaxLoadMissing 16

    DocumentRoot /var/www/html

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    <IfDefine ALLOW_CORS>
        Header set Access-Control-Allow-Origin "*"
    </IfDefine>

    LogLevel debug
</VirtualHost>
